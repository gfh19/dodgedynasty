@model DodgeDynasty.Models.PlayerRankModel

<div id="playerRanksPartial">
	<script type="text/javascript">
		$(function () {
			ranksWindow = @(Model.RanksWindow);
			initPlayerRanksShared();
		});
	</script>
	@Html.Partial("CurrentDraftPickPartial", Model)
	<div class="rank-header">
		<div class="rank-name" data-rank-id="@Model.CurrentRank.RankId">
			@if (!string.IsNullOrEmpty(Model.CurrentRank.Url))
			{
				<a href="@Model.CurrentRank.Url" target="_blank">@Model.CurrentRank.RankName</a><text> - @ViewBag.Title (@Model.CurrentRank.RankDate.ToString("M/d/yy"))</text>
			}
			else
			{
				<text>@Model.CurrentRank.RankName - @ViewBag.Title (@Model.CurrentRank.RankDate.ToString("M/d/yy"))</text>
			}
		</div>
		<div class="more-rank-opts">
			@{
				var draftId = DodgeDynasty.Shared.Utilities.GetRouteDraftId(Url.RequestContext.RouteData);
				var historyMode = Request.QueryString[DodgeDynasty.Shared.Constants.QS.HistoryMode];
				if (draftId != null && DodgeDynasty.Shared.Utilities.ToBool(historyMode))
				{
					if (ViewBag.Title == "Best Available")
					{
						<a href="@Url.Content("~/Draft/PlayerRanks/" + draftId + "?rankId=" + Model.RankId + "&historyMode=true")" id="allPlayersLink">Show All Players</a>
					}
					else
					{
						<a href="@Url.Content("~/Draft/BestAvailable/" + draftId + "?rankId=" + Model.RankId + "&historyMode=true")" id="bestAvailLink">Show Best Available</a>
					}
					<text>&#8226; <a href="@Url.Content("~/Draft/RankingsList/" + draftId + "?historyMode=true")" id="otherRanksLink">View Other Rankings</a></text>
				}
				else
				{
					if (ViewBag.Title == "Best Available")
					{
						<a href="@Url.Content("~/Draft/PlayerRanks?rankId=" + Model.RankId)" id="allPlayersLink">Show All Players</a>
					}
					else
					{
						<a href="@Url.Content("~/Draft/BestAvailable?rankId=" + Model.RankId)" id="bestAvailLink">Show Best Available</a>
					}
					<text>&#8226; <a href="@Url.Content("~/Draft/RankingsList")" id="otherRanksLink">View Other Rankings</a></text>
				}
			}
			<div class="pr-toggle-links">
				<a class="pr-expand-all" href="#">Expand All</a>/<a class="pr-collapse-all" href="#">Collapse All</a>
			</div>
			<div class="pr-highlight-links">
				<a class="pr-toggle-highlight" href="#">Show Highlighting *NEW!*</a>
			</div>
		</div>
	</div>
	<div class="rank-container">
		<div class="ba-rankings">
			<div class="ba-category pr-highlight-section hide-yo-wives">
				<span class="hq-color-span">
					Select Color:  @Html.DropDownList("highlight-color", Model.GetHighlightColors())
				</span>
				<div class="hq-header-section">
					<label class="ba-header hq-header">Highlighted Queue</label>
				</div>
				<div class="">
					<div class="hq-empty-msg">
						<p>
							The Queue is empty.
							<br /><br />Click player to add
							<br />to the Highlight Queue!
							<br /><br />(Drag and Drop players
							<br />within Queue to reorder)
						</p>
					</div>
					<table class="ba-table queue-table " data-link="ExpandQueue">
						<tbody>
							<tr>
								<th style="">#</th>
								<th>Rk</th>
								<th style="min-width: 115px">Player</th>
								<th>Tm</th>
								<th>Pos</th>
								@if (Model.AreYearByeWeeksFound())
								{
									<th>Bye</th>
								}
							</tr>
							@{int hpCnt = 1;}
							@foreach (var player in Model.HighlightedPlayers)
							{
								<tr class="highlighted @player.HighlightClass" data-player-id="@player.PlayerId">
									<td style="">@(hpCnt++)</td>
									<td>@(player.RankNum != null ? player.RankNum.ToString() : "---")</td>
									<td class="ba-player-name" data-player-id="@player.PlayerId">
										@if (Model.IsDraftActive() && Model.IsUserTurn() && player.PickNum == null)
										{
											<a href="#" class="player-link">@player.PlayerName</a>
										}
										else
										{
											@player.PlayerName
										}
									</td>
									@if (player.PickNum != null)
									{
										<td colspan="@(Model.AreYearByeWeeksFound() ? "3" : "2")">(@player.NickName, #@player.PickNum)</td>
									}
									else
									{
										<td>@player.NFLTeamDisplay</td>
										<td>@player.Position</td>
										if (Model.AreYearByeWeeksFound())
										{
											<td class="ba-bye-week">(@Model.GetNFLTeamByeWeek(player.NFLTeam))</td>
										}
									}
								</tr>
							}
							<td colspan="@(Model.AreYearByeWeeksFound() ? "6" : "5")" class="expand">
								<a href="#" id="ExpandQueue" class="expand-link" data-expand="@Model.Options.ExpandQueue.ToString().ToLower()">More...</a>
							</td>
						</tbody>
					</table>
				</div>
			</div>
			@Html.Partial("_PlayerRankCategory", Model.SetCategory(DodgeDynasty.Models.ViewTypes.RankCategory.Overall))
			@Html.Partial("_PlayerRankCategory", Model.SetCategory(DodgeDynasty.Models.ViewTypes.RankCategory.QB))
			@Html.Partial("_PlayerRankCategory", Model.SetCategory(DodgeDynasty.Models.ViewTypes.RankCategory.RB))
			@Html.Partial("_PlayerRankCategory", Model.SetCategory(DodgeDynasty.Models.ViewTypes.RankCategory.WRTE))
			@Html.Partial("_PlayerRankCategory", Model.SetCategory(DodgeDynasty.Models.ViewTypes.RankCategory.DEF))
			@Html.Partial("_PlayerRankCategory", Model.SetCategory(DodgeDynasty.Models.ViewTypes.RankCategory.K))
		</div>
	</div>
</div>