<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>@ViewBag.Title - Dodge Dynasty League</title>
	<link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
	<meta name="viewport" content="width=device-width" />
	@Styles.Render("~/Content/css")
	@Styles.Render("~/Content/css/lib")
	@Scripts.Render("~/bundles/jquery")
	@Scripts.Render("~/bundles/lib")
	<script src="@Url.Content("~/signalr/hubs")"></script>
	<script type="text/javascript" src="../../Scripts/Site.js"></script>
	@if (DodgeDynasty.Shared.Utilities.IsUserLoggedIn())
	{
		@Html.Partial(DodgeDynasty.Shared.Constants.Views.ColorStyles)
	}
</head>
<body>
	<header>
		<div class="content-wrapper">
			<div class="float-left">
				<p class="site-title"></p>
			</div>
			<div>
				<nav>
					<ul class="menu top-nav">
						@if (DodgeDynasty.Shared.Utilities.IsUserLoggedIn())
						{
							var draftId = DodgeDynasty.Shared.Utilities.GetRouteDraftId(Url.RequestContext.RouteData);
							var historyMode = Request.QueryString[DodgeDynasty.Shared.Constants.QS.HistoryMode];
							if (draftId != null && DodgeDynasty.Shared.Utilities.ToBool(historyMode))
							{
								<li>@Html.ActionLink("Pick", "Pick/" + draftId, "Draft", new { historyMode = true }, null)</li>
								<li>@Html.ActionLink("Draft", "Display/" + draftId, "Draft", new { historyMode = true }, null)</li>
								<li>@Html.ActionLink("Teams", "TeamDisplay/" + draftId, "Draft", new { historyMode = true }, null)</li>
								<li>@Html.ActionLink("Ranks", "BestAvailable/" + draftId, "Draft", new { historyMode = true }, null)</li>
							}
							else
							{
								<li>@Html.ActionLink("Pick", "Pick", "Draft")</li>
								<li>@Html.ActionLink("Draft", "Display", "Draft")</li>
								<li>@Html.ActionLink("Teams", "TeamDisplay", "Draft")</li>
								<li>@Html.ActionLink("Ranks", "BestAvailable", "Draft")</li>
							}
							<li>
								<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
									<span class="icon-bar"></span>
									<span class="icon-bar"></span>
									<span class="icon-bar"></span>
								</button>
								<span class="toggle-msgs-section">
									<a id="toggle-msgs-link" href="#">
										<span class="toggle-msgs">2</span>
									</a>
								</span>
							</li>
						}
						else
						{
							<li>@Html.ActionLink("Home", "Index", "Home")</li>
							<li>@Html.ActionLink("About", "About", "Home")</li>
							<li>@Html.ActionLink("Login", "Login", "Account")</li>
						}
					</ul>
					<div class="navbar-collapse collapse">
						<ul class="menu nav navbar-nav">
							<li>@Html.ActionLink("History", "History", "Draft")</li>
							<li>
								<a href="@Url.Action("Messages", "Site")">
									Messages
									@* if messages check *@
									<span class="menu-msgs-section">
										<span class="menu-msgs">3+</span>
									</span>
								</a>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
								   aria-expanded="false">Settings<span class="caret"></span></a>
								<ul class="dropdown-menu" role="menu">
									<li>@Html.ActionLink("Change Password", "ChangePassword", "Account")</li>
									<li>@Html.ActionLink("My Info", "MyInfo", "Account")</li>
									<li>@Html.ActionLink("Logout", "Logout", "Account")</li>
									<!--<li class="divider"></li>-->
								</ul>
							</li>
							@if (DodgeDynasty.Shared.Utilities.IsUserAdmin())
							{
								<li class="dropdown">
									<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
									   aria-expanded="false">Admin<span class="caret"></span></a>
									<ul class="dropdown-menu" role="menu">
										<li>@Html.ActionLink("Change User Password", "ChangePassword", "Admin")</li>
										<li>@Html.ActionLink("Manage Users", "ManageUsers", "Admin")</li>
										<li>@Html.ActionLink("Manage Leagues", "ManageLeagues", "Admin")</li>
										<li>@Html.ActionLink("Setup Draft", "SetupDraft", "Admin")</li>
										<li>@Html.ActionLink("Activate Draft", "ActivateDraft", "Admin")</li>
										<li>@Html.ActionLink("Enter Draft Pick", "Input", "Admin")</li>
										<!--<li class="divider"></li>-->
									</ul>
								</li>
							}
						</ul>
					</div>
				</nav>
			</div>
		</div>
	</header>
	<div class="content-width">
		<div id="body">
			@RenderSection("featured", required: false)
			<section class="content-wrapper main-content clear-fix">
				@RenderBody()
			</section>
		</div>
		<footer>
			<div class="content-wrapper">
				<div class="float-left">
					<p>&copy; @DateTime.Now.Year - Dodge Dynasty League</p>
				</div>
			</div>
		</footer>
	</div>
	<script type="text/javascript">
		var baseURL = '@Url.Content("~")';
		var refreshTimer = @System.Configuration.ConfigurationManager.AppSettings[DodgeDynasty.Shared.Constants.AppSettings.RefreshTimer];
		var draftHistoryId = '@DodgeDynasty.Shared.Utilities.GetRouteDraftId(Url.RequestContext.RouteData)';
	</script>
	@RenderSection("scripts", required: false)
</body>
</html>
