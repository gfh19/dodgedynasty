@model DodgeDynasty.Models.DraftSetupModel

<div id="setupDraft" data-draft-id="@Model.DraftId.Value">
	<h2>Draft Setup - @Model.GetCurrentDraftName() Draft</h2>
	@Html.ValidationSummary(false)
	<div class="error-messages">
		<div class="blank-owner-msg invalid hide-yo-wives">Error - Owner cannot be left blank.</div>
	</div>
	<div class="draft clear-fix">
	
		<div class="buttons"><button id="submitDraftPicks1" class="submitDraftPicks" type="button">Update Draft</button></div>
		<div class="round-picks">
		@foreach (var pick in Model.GetDraftSetupPicks())
		{
			var isNewRound = Model.IsNewRound(pick.RoundNum);
			if (isNewRound)
			{
				@Html.Raw("</div>");
				@Html.Raw("<div class=\"round-picks\">");
				Model.CurrentRoundNum = pick.RoundNum;
				<div class="round" data-round-num="@Model.CurrentRoundNum">
				<span class="round-right">Round <span class="round-num">@Model.CurrentRoundNum</span>
					<a href="#" class="delete-round-right @(Model.CurrentRoundNum == 1 ? "hide-yo-wives" : "")" tabindex="-1"><img src="@Url.Content("~/Content/images/minus.png")" alt="Delete Round" /></a>
					<a href="#" class="add-round-right" tabindex="-1"><img src="@Url.Content("~/Content/images/plus.png")" alt="Add Round" /></a>
					(<a href="#" class="reverse-round" tabindex="-1">Reverse</a>)
				</span></div>
			}
				<span class="pick" data-pick-id="@pick.DraftPickId" data-pick-num="@pick.PickNum">
					<div class="setup-pick-outline outline">
					@if (pick.UserId != 0)
					{
						 Model.SetCurrentGridOwnerUser(pick.UserId);
						 Model.SetCurrentGridPlayer(pick.PlayerId);
						 <span class="sd-pick-num">@pick.PickNum</span>@Html.DropDownListFor(m => m.CurrentGridOwnerUser.UserId, Model.GetDraftOwnerListItems(), new { @class = "pick-owner" })<a href="#" class="delete-pick-right @(pick.PickNum == 1 ? "hide-yo-husbands-too" : "")" tabindex="-1"><img src="@Url.Content("~/Content/images/minus.png")" alt="Delete Pick"/></a>
					}
					else
					{
						<span class="sd-pick-num">@pick.PickNum</span>@Html.DropDownList("UserId", Model.GetDraftOwnerListItems(), new { @class = "pick-owner" })<a href="#" class="delete-pick-right @(pick.PickNum == 1 ? "hide-yo-husbands-too" : "")" tabindex="-1"><img src="@Url.Content("~/Content/images/minus.png")" alt="Delete Pick"/></a>
					}
					@if (Model.CurrentGridPlayer != null && !string.IsNullOrEmpty(Model.CurrentGridPlayer.PlayerName))
					{
						<div data-player-id="@Model.CurrentGridPlayer.PlayerId" class="picked-player">
							<span class="picked-player-name">@Model.CurrentGridPlayer.PlayerName</span>
							<span style="display: flex"><a href="#" class="delete-picked-player">X</a></span>
						</div>
					}
					</div><span class="picks-right"><a href="#" class="add-pick-right" tabindex="-1"><img src="@Url.Content("~/Content/images/plus.png")" alt="Add Pick"/></a></span>
				</span>
		}
		</div>
			@using (Html.BeginForm("SetupDraft", Model.AdminMode, FormMethod.Get, new { id="setupDraftForm"}))
			   {
			   }
			<div class="buttons"><button id="submitDraftPicks2" class="submitDraftPicks" type="submit">Update Draft</button></div>
	</div>
</div>